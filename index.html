<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zwariowany Garma≈º ‚Äì Catering dla firm</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,.75); }
    .shadow-soft { box-shadow: 0 10px 30px rgba(2,6,23,0.08); }
    .skeleton { animation: pulse 1.2s ease-in-out infinite; background: linear-gradient(90deg,#f3f4f6 25%,#e5e7eb 37%,#f3f4f6 63%); background-size: 400% 100%; }
    @keyframes pulse { 0%{background-position:100% 50%} 100%{background-position:0 50%} }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl overflow-hidden">
  <img src="https://i.imgur.com/46GgLPq.png" alt="Zwariowany Garma≈º" class="w-full h-full object-contain">
</div>

        <div>
          <div class="font-extrabold tracking-tight">Zwariowany Garma≈º</div>
          <div class="text-xs text-slate-500 -mt-0.5">Catering dla firm</div>
        </div>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#menu" class="hover:text-blue-600">Menu</a>
        <a href="#dlaczego" class="hover:text-blue-600">Dlaczego my</a>
        <a href="#kontakt" class="hover:text-blue-600">Kontakt</a>
      </nav>
      <a href="#kontakt" class="hidden md:inline-flex bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl text-sm font-semibold shadow-soft">Zam√≥w dla firmy</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900"></div>
    <div class="max-w-7xl mx-auto px-4 py-16 md:py-24 text-white">
      <div class="grid md:grid-cols-2 gap-10 items-center">
        <div>
          <h1 class="text-4xl md:text-6xl font-extrabold leading-tight">
            Smak, kt√≥ry pokocha <span class="text-blue-400">ca≈Çe biuro</span>
          </h1>
          <p class="mt-5 text-lg text-slate-300">
            Od codziennych lunchy po konferencje. Elastyczne menu, szybka dostawa, przejrzyste ceny.
            Zjed≈∫ ni≈ºej i przekonaj siƒô sam.
          </p>
          <div class="mt-8 flex flex-wrap gap-3">
            <a href="#menu" class="bg-blue-600 hover:bg-blue-700 px-5 py-3 rounded-xl font-semibold shadow-soft">Zobacz menu</a>
            <a href="#kontakt" class="bg-white/10 hover:bg-white/20 px-5 py-3 rounded-xl font-semibold">Kontakt</a>
          </div>
        </div>
        <div class="glass rounded-3xl p-6 shadow-soft">
  <div class="grid grid-cols-2 gap-4">
    <img src="https://scontent.fqyy1-1.fna.fbcdn.net/v/t39.30808-6/484185933_3681838648618238_7549851379564282708_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=127cfc&_nc_ohc=FqDd6-I-6YkQ7kNvwEKt9qt&_nc_oc=AdnhhQR-3CWFsJ6MiDq2D2tG5OtNOxPZz03vqynWk6k7AwXuuTYlZoxyBw69AaU1_0g&_nc_zt=23&_nc_ht=scontent.fqyy1-1.fna&_nc_gid=tMZedkl1yQOu4lYw8cS5XQ&oh=00_AfZVvUuMEIFs0VKa4J0epRaY88lye_fNAMejUSe9KxeiYA&oe=68CB7F93" alt="Pierogi" class="h-28 w-full rounded-2xl object-cover">

    <img src="https://scontent.fqyy1-1.fna.fbcdn.net/v/t1.6435-9/200687108_2479265005542281_8213543658877431030_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=833d8c&_nc_ohc=YakTz58UMeYQ7kNvwGQt0UE&_nc_oc=Adl5GZKNJeQLxAgJU6-hE5t8hI0eLA-VnS_ZeIQqsVyp3E5idcte2tGENSQQxOS5hCQ&_nc_zt=23&_nc_ht=scontent.fqyy1-1.fna&_nc_gid=BqjPxTDGQ8S0dBptgEDQlQ&oh=00_AfbiqtpCVUJs8rvKJyz-endVU3E1MBmwAnK5Y4ZQ9sQ3Vw&oe=68ECFAA8" class="h-28 w-full rounded-2xl object-cover">

    <img src="https://scontent.fqyy1-1.fna.fbcdn.net/v/t1.6435-9/148147781_2367803970021719_1071372994617029457_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=833d8c&_nc_ohc=wKM9-NojK_oQ7kNvwEJxMoi&_nc_oc=Adn9GWBmd4ooaMY92wnSTqHFxz8M9e2RsLftuwc7ji87XdhEZnp6cWCIvtHP3NpXtkw&_nc_zt=23&_nc_ht=scontent.fqyy1-1.fna&_nc_gid=5YUeIaYeyDd5f1Wqu5LnEQ&oh=00_AfaXRxgc3GQJsucqiwO6PhGcdwM7bNYVq_GPdJSIarNc_Q&oe=68ECF236" alt="Sa≈Çatka" class="h-28 w-full rounded-2xl object-cover">
    <img src="https://poprostupycha.com.pl/wp-content/uploads/2018/12/pierogi-ruskie_7.jpg" alt="Zupa" class="h-28 w-full rounded-2xl object-cover">
  </div>
  <p class="text-slate-700 text-sm mt-4">PodglƒÖd zam√≥wie≈Ñ firmowych</p>
</div>

      </div>
    </div>
  <section id="dlaczego" class="py-20 bg-slate-50">
  <div class="max-w-7xl mx-auto px-4">
    <h2 class="text-3xl md:text-4xl font-extrabold text-slate-900 text-center">
      Co wyr√≥≈ºnia nasz catering
    </h2>

    <div class="mt-12 grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- 1 -->
      <div class="bg-white rounded-2xl p-6 shadow-soft border border-slate-100 text-center">
        <div class="text-4xl mb-3">üç≤</div>
        <h3 class="font-bold">Domowe smaki</h3>
        <p class="text-slate-600 text-sm mt-2">Tradycyjne receptury, zero gotowc√≥w i p√≥≈Çprodukt√≥w.</p>
      </div>

      <!-- 2 -->
      <div class="bg-white rounded-2xl p-6 shadow-soft border border-slate-100 text-center">
        <div class="text-4xl mb-3">üöö</div>
        <h3 class="font-bold">Szybka dostawa</h3>
        <p class="text-slate-600 text-sm mt-2">Dowozy prosto do biura ‚Äì gorƒÖce i punktualnie.</p>
      </div>

      <!-- 3 -->
      <div class="bg-white rounded-2xl p-6 shadow-soft border border-slate-100 text-center">
        <div class="text-4xl mb-3">ü•ó</div>
        <h3 class="font-bold">Opcje dla ka≈ºdego</h3>
        <p class="text-slate-600 text-sm mt-2">Wege, fit i bezglutenowe warianty w standardzie.</p>
      </div>

      <!-- 4 -->
      <div class="bg-white rounded-2xl p-6 shadow-soft border border-slate-100 text-center">
        <div class="text-4xl mb-3">üìä</div>
        <h3 class="font-bold">Elastyczne rozliczenia</h3>
        <p class="text-slate-600 text-sm mt-2">Faktury zbiorcze i jasne zasady wsp√≥≈Çpracy.</p>
      </div>
    </div>
  </div>
</section>



  <!-- MENU -->
  <section id="menu" class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
        <div>
          <h2 class="text-3xl md:text-4xl font-extrabold text-slate-900">Menu i cennik</h2>
          <p class="text-slate-500 mt-2">Podane ceny sƒÖ cenami netto.</p>
          <p class="text-slate-500 mt-2">Uwaga, ceny mogƒÖ ulec zmianie. Stan cen na 19.09.2025r.</p>
        </div>
        <div class="flex flex-wrap gap-3 items-center">
          <input id="search" placeholder="Szukaj dania..." class="w-64 max-w-full px-4 py-2.5 rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500" />
          <div id="cats" class="flex flex-wrap gap-2"></div>
        </div>
      </div>

      <div id="grid" class="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>

      <div id="empty" class="hidden text-center py-12 text-slate-500">
        Brak pozycji spe≈ÇniajƒÖcych kryteria.
      </div>

      <div id="loader" class="mt-10 grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        <div class="h-64 rounded-2xl skeleton"></div>
        <div class="h-64 rounded-2xl skeleton"></div>
        <div class="h-64 rounded-2xl skeleton"></div>
        <div class="h-64 rounded-2xl skeleton"></div>
      </div>
    </div>
  </section>

  <!-- Kontakt -->
  <section id="kontakt" class="py-16 bg-slate-900 text-white">
    <div class="max-w-7xl mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-extrabold">Skontaktuj siƒô z nami</h2>
      <p class="mt-3 text-slate-300">Zadzwo≈Ñ lub napisz ‚Äì przygotujemy ofertƒô pod Tw√≥j zesp√≥≈Ç.</p>
      <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
        <a href="mailto:zwariowanygarmaz123@gmail.com" class="px-6 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 font-semibold shadow-soft">zwariowanygarmaz123@gmail.com</a>
        <a href="tel:+48511393523" class="px-6 py-3 rounded-xl bg-white/10 hover:bg-white/20 font-semibold">+48 511 393 523</a>
      </div>
      <p class="mt-8 text-slate-400">ul. Orzechowa 5 80-175 Gda≈Ñsk</p>
    </div>
  </section>

  <footer class="py-8 text-center text-slate-500 text-sm">
    ¬© 2025 Zwariowany Garma≈º
  </footer>

<script>
  // === 1) KONFIGURACJA ===
  const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT7s70xH32hvGyf81asg-gKRZkl7N9xUG_B_f74CVLX1uWzVF424Gvmm8Wa-V7LHwfQIIu0LCTtEJ-8/pub?gid=0&single=true&output=csv";

  // mapowanie nazw kolumn
  const MAP = {
    name:     ["nazwa","produkt","danie","pozycja","produkt "],
    price:    ["cena","cena/kg","cena brutto","cena netto"],
    category: ["kategoria","typ","segment"],
    desc:     ["opis","opis dania","sklad","sk≈Çad"],
    image:    ["zdjƒôcie","zdjecie","image","img","foto","obraz"],
    unit:     ["jednostka","jm","/kg","/szt","za","l","/l","litr"]
  };

  // === 2) UTYLITIES ===
  const lc = s => (s || "").toString().trim().toLowerCase();

  // poprawione formatowanie ceny
  function money(v){
    const raw = (v ?? "").toString();
    const num = parseFloat(raw.replace(/\s/g,"").replace(',', '.').replace(/[^\d.\-]/g,''));
    return Number.isFinite(num)
      ? num.toLocaleString("pl-PL",{minimumFractionDigits:2,maximumFractionDigits:2})
      : raw;
  }

  // poprawione formatowanie jednostki
  function formatUnit(uRaw){
    const u = (uRaw || "").toString().trim();
    if (!u) return "";
    const norm = u.replace(/\s+/g," ").replace('.',',');

    // je≈ºeli zawiera cyfrƒô (np. "0,5 kg", "500 ml", "8 szt")
    if (/\d/.test(norm)) return " / " + norm;

    const key = norm.toLowerCase();
    const map = {
      "kg":"kg","/kg":"kg",
      "szt":"szt","/szt":"szt",
      "porcja":"porcja",
      "l":"L","/l":"L","litr":"L","litra":"L","litr√≥w":"L"
    };
    return " / " + (map[key] || norm);
  }

  // CSV parser
  function parseCSV(text){
    const rows=[]; let cur=[]; let cell=""; let q=false;
    for (let i=0;i<text.length;i++){
      const c=text[i], n=text[i+1];
      if (q){
        if (c==='"' && n==='"'){ cell+='"'; i++; }
        else if (c=== '"'){ q=false; }
        else { cell+=c; }
      } else {
        if (c === '"'){ q=true; }
        else if (c === ','){ cur.push(cell); cell=""; }
        else if (c === '\n'){ cur.push(cell); rows.push(cur); cur=[]; cell=""; }
        else if (c === '\r'){ /* ignore */ }
        else { cell += c; }
      }
    }
    if (cell.length || cur.length) { cur.push(cell); rows.push(cur); }
    return rows;
  }

  function normalizeRows(headers, rows){
    const hl = headers.map(h => lc(h));
    const cellAt = (row, i) => Array.isArray(row) ? (row[i] ?? "") : (row[headers[i]] ?? "");
    function pick(mapKeys, row){
      for (let i=0;i<hl.length;i++){
        if (MAP && MAP.name && lc(hl[i]) === lc(mapKeys)) return cellAt(row,i);
        if (mapKeys.includes(hl[i])) return cellAt(row,i);
      }
      return "";
    }

    let items = rows.map(r => ({
      name:     pick(MAP.name, r)     || cellAt(r,0),
      price:    pick(MAP.price, r)    || cellAt(r,1),
      category: pick(MAP.category, r) || "Menu",
      desc:     pick(MAP.desc, r)     || cellAt(r,3),
      image:    pick(MAP.image, r)    || cellAt(r,4),
      unit:     pick(MAP.unit, r)     || cellAt(r,2) || "z≈Ç"
    }));

    return items.map(it => ({
      name: (it.name ?? "").toString(),
      price: (it.price ?? "").toString(),
      category: it.category || "Menu",
      desc: it.desc || "",
      image: it.image || "",
      unit: it.unit || "z≈Ç"
    })).filter(x => x.name || x.price || x.desc);
  }

  function renderCats(items){
    const cats = Array.from(new Set(items.map(i => i.category).filter(Boolean)));
    const bar = document.getElementById("cats");
    bar.innerHTML = "";
    const mkBtn = (label) => {
      const a = document.createElement("button");
      a.className = "px-3 py-1.5 rounded-full border text-sm hover:border-blue-500 hover:text-blue-600";
      a.dataset.cat = label;
      a.textContent = label;
      return a;
    };
    bar.appendChild(mkBtn("Wszystko"));
    cats.forEach(c => bar.appendChild(mkBtn(c)));
  }

  function renderGrid(items){
    const wrap = document.getElementById("grid");
    const empty = document.getElementById("empty");
    wrap.innerHTML = "";
    if (!items.length){ empty.classList.remove("hidden"); return; }
    empty.classList.add("hidden");

    items.forEach(it => {
      const card = document.createElement("article");
      card.className = "bg-white rounded-2xl border border-slate-200 shadow-soft overflow-hidden flex flex-col";
      const imgWrap = document.createElement("div");
      imgWrap.className = "h-40 bg-slate-100";
      if (it.image){
        const img = document.createElement("img");
        img.src = it.image; img.alt = it.name;
        img.className = "w-full h-40 object-cover";
        imgWrap.appendChild(img);
      } else {
        imgWrap.innerHTML = '<div class="w-full h-40 grid place-items-center text-slate-400">Zdjƒôcie</div>';
      }
      card.appendChild(imgWrap);

      const body = document.createElement("div");
      body.className = "p-4 flex flex-col gap-2 grow";
      const cat = document.createElement("span");
      cat.className = "inline-block text-xs px-2 py-1 bg-slate-100 rounded-full w-fit";
      cat.textContent = it.category || "Menu";
      body.appendChild(cat);

      const h3 = document.createElement("h3");
      h3.className = "text-lg font-bold";
      h3.textContent = it.name || "Pozycja";
      body.appendChild(h3);

      if (it.desc){
        const p = document.createElement("p");
        p.className = "text-sm text-slate-600 line-clamp-3";
        p.textContent = it.desc;
        body.appendChild(p);
      }

      const foot = document.createElement("div");
      foot.className = "mt-auto pt-2 flex items-baseline justify-between";

      const price = document.createElement("div");
      price.className = "text-2xl font-extrabold text-blue-600";
      if(it.price){
        price.innerHTML = `<span>${money(it.price)} z≈Ç</span><span class="text-sm text-slate-500">${formatUnit(it.unit)}</span>`;
      } else {
        price.textContent = "‚Äî";
      }
      foot.appendChild(price);

      const btn = document.createElement("button");
      btn.className = "text-sm px-3 py-2 rounded-xl border border-slate-300 hover:border-blue-500 hover:text-blue-600";
      btn.textContent = "Zapytaj o ofertƒô";
      btn.addEventListener("click", () => location.hash = "#kontakt");
      foot.appendChild(btn);
      body.appendChild(foot);

      card.appendChild(body);
      wrap.appendChild(card);
    });
  }

  function setupFilters(allItems){
    const search = document.getElementById("search");
    const cats = document.getElementById("cats");

    function apply(){
      const q = (search.value || "").toLowerCase();
      const activeCatBtn = cats.querySelector("button.active");
      const cat = activeCatBtn ? activeCatBtn.dataset.cat : "Wszystko";
      const filtered = allItems.filter(i => {
        const inCat = cat === "Wszystko" || (i.category||"").toLowerCase() === cat.toLowerCase();
        const inText = !q || [i.name, i.desc, i.category].some(x => (x||"").toLowerCase().includes(q));
        return inCat && inText;
      });
      renderGrid(filtered);
    }

    cats.addEventListener("click", (e) => {
      if (e.target.tagName !== "BUTTON") return;
      cats.querySelectorAll("button").forEach(b => b.classList.remove("active","border-blue-500","text-blue-600","bg-blue-50"));
      e.target.classList.add("active","border-blue-500","text-blue-600","bg-blue-50");
      apply();
    });
    search.addEventListener("input", apply);

    const first = cats.querySelector("button");
    if (first){ first.classList.add("active","border-blue-500","text-blue-600","bg-blue-50"); }
    apply();
  }

  // === 3) START ===
  (async function init(){
    const loader = document.getElementById("loader");
    const empty  = document.getElementById("empty");

    const fetchWithTimeout = async (url, t=12000) => {
      const ctrl = new AbortController();
      const id = setTimeout(() => ctrl.abort("timeout"), t);
      try {
        return await fetch(url, { cache: "no-store", signal: ctrl.signal });
      } finally {
        clearTimeout(id);
      }
    };

    try {
      const res = await fetchWithTimeout(CSV_URL);
      if (!res.ok) throw new Error(`HTTP ${res.status} ${res.statusText}`);
      const text = await res.text();

      const rows = parseCSV(text).filter(r => r.length && r.join("").trim() !== "");
      const headers = rows.shift() || [];
      const items = normalizeRows(headers, rows);

      if (!items.length) {
        document.getElementById("grid").innerHTML = "";
        empty.classList.remove("hidden");
        empty.textContent = "Brak pozycji do wy≈õwietlenia. Odczytane nag≈Ç√≥wki: " + headers.join(", ");
        return;
      }

      renderCats(items);
      setupFilters(items);
    } catch (err) {
      console.error("B≈ÇƒÖd ≈Çadowania danych:", err);
      document.getElementById("loader").innerHTML =
        '<div class="col-span-full text-center text-slate-500">Nie uda≈Ço siƒô pobraƒá CSV (sieƒá/CORS/timeout). Sprawd≈∫ publikacjƒô lub od≈õwie≈º stronƒô.</div>';
    } finally {
      loader.classList.add("hidden");
    }
  })();
</script>

<!-- FB Floating Button -->
<a href="https://www.facebook.com/zwariowanygarmaz123gmail"
   onclick="window.open(this.href, 'popupfb', 'width=800,height=600'); return false;"
   class="fixed top-1/2 right-0 -translate-y-1/2 bg-blue-600 text-white p-4 rounded-l-xl shadow-lg hover:bg-blue-700 z-50"
   title="Odwied≈∫ nas na Facebooku">
  <!-- Ikona Facebooka -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10">
    <path d="M22 12a10 10 0 10-11.5 9.9v-7h-2v-2.9h2v-2.2c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2v2h2.3l-.4 2.9h-1.9v7A10 10 0 0022 12z"/>
  </svg>
</a>

</body>
</html>
